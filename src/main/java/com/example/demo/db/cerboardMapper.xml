<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cerboard">
	
	<!-- 인증게시판 리스트  -->
	<select id="findAll" resultType="cerboardVO">
		select cer.no,cer_thumbnail,cer_content, cer_date , nickname from
		(select cer.no,cer_thumbnail,cer_content, cer_date , nickname
		from certification_board cer, member m
		where m.no=cer.member_no) cer
		left outer join img i
		on i.cer_no = cer.no
		order by CER_DATE
	</select>
	
	
		<!-- My 인증게시판 리스트  -->
	<select id="findByMemberNo" resultType="cerboardVO">
		select cer.no,cer_thumbnail,CER_CONTENT, CER_DATE , nickname from
		(select cer.no,cer_thumbnail,CER_CONTENT, CER_DATE , nickname
		from certification_board cer, member m
		where m.no=cer.member_no 
		and member_no=#{member_no}
		) cer
		left outer join img i
		on i.cer_no = cer.no
		order by CER_DATE
	</select>
	
	
	<insert id="insert" parameterType="cerboardVO">
	   	insert into certification_board values(
	    seq_cer.nextval,
	   #{cer_status},
	    #{cer_content},
	     sysdate,
	     0,
	     0,             
	    #{member_no},
	    #{chg_user_no},
	    #{cer_thumbnail}
	    )
	</insert>

</mapper>